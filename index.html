
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>iBudget Pro India</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            -webkit-tap-highlight-color: transparent;
            background-color: #F2F2F7;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        #root { min-height: 100vh; }
        .ios-blur { backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); }
        .ios-shadow { box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .safe-area-bottom { padding-bottom: env(safe-area-inset-bottom); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        input[type="number"]::-webkit-inner-spin-button, 
        input[type="number"]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
<body class="bg-[#F2F2F7]">
    <div id="root">
      <div class="flex items-center justify-center h-screen bg-[#F2F2F7]">
        <div class="text-center">
            <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#007AFF] mx-auto mb-4"></div>
            <div class="text-[#007AFF] font-semibold">iBudget India loading...</div>
        </div>
      </div>
    </div>

    <!-- Dependencies -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- Constants & Utilities ---
        const Category = {
          FOOD: 'Food & Drink',
          TRANSPORT: 'Transport',
          SHOPPING: 'Shopping',
          ENTERTAINMENT: 'Entertainment',
          HOUSING: 'Rent/Housing',
          UTILITIES: 'Bills',
          INCOME: 'Salary/Income',
          OTHER: 'Other'
        };

        const formatCurrency = (val) => {
          return new Intl.NumberFormat('en-IN', {
            style: 'currency',
            currency: 'INR',
            maximumFractionDigits: 0
          }).format(val);
        };

        const ICONS = {
          Plus: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>,
          Wallet: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"></path><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"></path><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"></path></svg>,
          Chart: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 20V10"></path><path d="M12 20V4"></path><path d="M6 20v-6"></path></svg>,
          Sparkles: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path></svg>
        };

        // --- App ---
        const App = () => {
          const [transactions, setTransactions] = useState([]);
          const [isAddModalOpen, setIsAddModalOpen] = useState(false);
          const [note, setNote] = useState('');
          const [amount, setAmount] = useState('');
          const [type, setType] = useState('expense');

          useEffect(() => {
            const saved = localStorage.getItem('ibudget_in_tx');
            if (saved) setTransactions(JSON.parse(saved));
          }, []);

          useEffect(() => {
            localStorage.setItem('ibudget_in_tx', JSON.stringify(transactions));
          }, [transactions]);

          const totalBalance = transactions.reduce((acc, t) => t.type === 'income' ? acc + t.amount : acc - t.amount, 0);
          const monthExpense = transactions
            .filter(t => t.type === 'expense')
            .reduce((acc, t) => acc + t.amount, 0);

          const handleAdd = () => {
            if (!note || !amount) return;
            const newTx = {
              id: Date.now().toString(),
              amount: parseFloat(amount),
              note: note,
              date: new Date().toISOString(),
              type: type
            };
            setTransactions([newTx, ...transactions]);
            setIsAddModalOpen(false);
            setNote('');
            setAmount('');
          };

          return (
            <div className="flex flex-col h-screen max-w-md mx-auto bg-[#F2F2F7] overflow-hidden relative shadow-2xl">
              {/* iOS Header */}
              <header className="pt-14 pb-6 px-6 bg-white/80 ios-blur sticky top-0 z-20 border-b border-gray-100 flex justify-between items-end">
                <div>
                  <h2 className="text-[10px] font-black text-gray-400 uppercase tracking-widest">Total Balance</h2>
                  <h1 className="text-3xl font-bold text-gray-900 mt-1">{formatCurrency(totalBalance)}</h1>
                </div>
                <button 
                  onClick={() => setIsAddModalOpen(true)} 
                  className="w-10 h-10 rounded-full bg-[#007AFF] flex items-center justify-center text-white shadow-lg active:scale-90 transition-transform"
                >
                  <ICONS.Plus />
                </button>
              </header>

              <main className="flex-1 overflow-y-auto pb-32 px-4 no-scrollbar">
                {/* AI Insight Card */}
                <div className="mt-6 p-4 bg-gradient-to-br from-[#5856D6] to-[#007AFF] rounded-2xl text-white ios-shadow relative overflow-hidden">
                  <div className="flex items-center gap-2 mb-2 opacity-90">
                    <ICONS.Sparkles />
                    <span className="text-[10px] font-bold uppercase tracking-wider">AI Financial Insight</span>
                  </div>
                  <p className="text-sm font-medium leading-relaxed">
                    {transactions.length > 0 
                      ? "Your spending in India is looking stable. Consider saving 20% of your income this month for better long-term growth."
                      : "Welcome to iBudget Pro. Start adding your daily expenses to get personalized AI spending insights."}
                  </p>
                </div>

                {/* Quick Stats */}
                <div className="grid grid-cols-2 gap-4 mt-6">
                  <div className="bg-white p-4 rounded-2xl ios-shadow">
                    <div className="text-[10px] font-bold text-gray-400 uppercase mb-1">Monthly Spending</div>
                    <div className="text-lg font-bold text-red-500">{formatCurrency(monthExpense)}</div>
                  </div>
                  <div className="bg-white p-4 rounded-2xl ios-shadow">
                    <div className="text-[10px] font-bold text-gray-400 uppercase mb-1">Tx Count</div>
                    <div className="text-lg font-bold text-gray-900">{transactions.length}</div>
                  </div>
                </div>

                {/* Transaction List */}
                <div className="mt-8">
                  <h3 className="text-sm font-bold text-gray-500 uppercase tracking-wider ml-2 mb-3">Recent Activity</h3>
                  {transactions.length === 0 ? (
                    <div className="flex flex-col items-center justify-center py-12 text-gray-300">
                      <ICONS.Wallet />
                      <p className="mt-2 font-medium">No transactions yet</p>
                    </div>
                  ) : (
                    <div className="space-y-2">
                      {transactions.map(t => (
                        <div key={t.id} className="bg-white p-4 rounded-2xl flex justify-between items-center ios-shadow animate-in slide-in-from-bottom-2 duration-300">
                          <div className="flex items-center gap-3">
                            <div className={`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${t.type === 'income' ? 'bg-[#34C759]' : 'bg-[#FF3B30]'}`}>
                              {t.note.charAt(0).toUpperCase()}
                            </div>
                            <div>
                              <div className="font-bold text-gray-900 leading-tight">{t.note}</div>
                              <div className="text-[10px] text-gray-400 uppercase font-bold">{new Date(t.date).toLocaleDateString('en-IN', {day: 'numeric', month: 'short'})}</div>
                            </div>
                          </div>
                          <div className={`font-bold ${t.type === 'income' ? 'text-[#34C759]' : 'text-gray-900'}`}>
                            {t.type === 'income' ? '+' : '-'}{formatCurrency(t.amount)}
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                </div>
              </main>

              {/* Tab Bar */}
              <nav className="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white/90 ios-blur border-t border-gray-100 flex justify-around safe-area-bottom pt-3 pb-6 z-30">
                <div className="flex flex-col items-center text-[#007AFF]">
                  <ICONS.Wallet />
                  <span className="text-[10px] mt-1 font-bold">Wallet</span>
                </div>
                <div className="flex flex-col items-center text-gray-400 opacity-50">
                  <ICONS.Chart />
                  <span className="text-[10px] mt-1 font-bold">Analysis</span>
                </div>
              </nav>

              {/* Add Modal */}
              {isAddModalOpen && (
                <div className="fixed inset-0 z-50 flex items-end justify-center bg-black/40 backdrop-blur-sm p-0 px-2 pb-2" onClick={() => setIsAddModalOpen(false)}>
                  <div className="w-full max-w-md bg-[#F2F2F7] rounded-[2.5rem] p-8 pb-12 ios-shadow animate-in slide-in-from-bottom duration-300" onClick={e => e.stopPropagation()}>
                    <div className="flex justify-between items-center mb-8">
                      <h2 className="text-2xl font-bold">New Entry</h2>
                      <div className="flex bg-gray-200 p-1 rounded-xl">
                         <button 
                            onClick={() => setType('expense')}
                            className={`px-4 py-1.5 rounded-lg text-xs font-bold transition-all ${type === 'expense' ? 'bg-white shadow text-red-500' : 'text-gray-500'}`}
                         >Expense</button>
                         <button 
                            onClick={() => setType('income')}
                            className={`px-4 py-1.5 rounded-lg text-xs font-bold transition-all ${type === 'income' ? 'bg-white shadow text-green-600' : 'text-gray-500'}`}
                         >Income</button>
                      </div>
                    </div>

                    <div className="space-y-4">
                      <div className="bg-white p-4 rounded-2xl ios-shadow">
                        <label className="text-[10px] font-black text-gray-400 uppercase mb-1 block">Description</label>
                        <input 
                          autoFocus
                          className="w-full bg-transparent focus:outline-none font-semibold text-lg" 
                          placeholder="Zomato, Rent, Salary..." 
                          value={note} 
                          onChange={e => setNote(e.target.value)} 
                        />
                      </div>
                      
                      <div className="bg-white p-4 rounded-2xl ios-shadow">
                        <label className="text-[10px] font-black text-gray-400 uppercase mb-1 block">Amount (INR)</label>
                        <div className="flex items-center gap-2">
                           <span className="text-2xl font-bold text-[#007AFF]">â‚¹</span>
                           <input 
                            type="number" 
                            className="w-full bg-transparent focus:outline-none font-bold text-2xl" 
                            placeholder="0" 
                            value={amount} 
                            onChange={e => setAmount(e.target.value)} 
                          />
                        </div>
                      </div>
                    </div>

                    <button 
                      onClick={handleAdd} 
                      className="w-full bg-[#007AFF] text-white py-4 rounded-2xl font-bold text-lg mt-8 active:scale-95 transition-all shadow-xl shadow-blue-200"
                    >
                      Save Transaction
                    </button>
                  </div>
                </div>
              )}
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
